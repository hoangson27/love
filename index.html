<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Con Thuyá»n TÃ¬nh TrÃ´i Vá» Tim Em ğŸŒ…</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Quicksand", sans-serif;
        background: linear-gradient(
          135deg,
          #ffeef8 0%,
          #ffe0f0 25%,
          #ffb3d9 50%,
          #ff99cc 75%,
          #ff80bf 100%
        );
        background-size: 400% 400%;
        animation: gradientFlow 8s ease infinite;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      @keyframes gradientFlow {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .heart-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .falling-heart {
        position: absolute;
        color: rgba(255, 105, 180, 0.8);
        font-size: 20px;
        animation: fall linear infinite;
        pointer-events: none;
      }

      @keyframes fall {
        0% {
          transform: translateY(-100px) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      .game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
        position: relative;
        z-index: 10;
      }

      .welcome-screen {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        animation: fadeInUp 1s ease-out;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .main-title {
        font-size: 3.5rem;
        font-weight: 700;
        background: linear-gradient(45deg, #ff1744, #ff4569, #ff6b9d);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        text-shadow: 0 4px 8px rgba(255, 23, 68, 0.3);
        animation: titlePulse 2s ease-in-out infinite;
      }

      @keyframes titlePulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .subtitle {
        font-size: 1.3rem;
        color: #d81b60;
        margin-bottom: 2rem;
        font-weight: 500;
        animation: subtitleFloat 3s ease-in-out infinite;
      }

      @keyframes subtitleFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .heart-decoration {
        font-size: 2rem;
        margin: 1rem 0;
        animation: heartBeat 1.5s ease-in-out infinite;
      }

      @keyframes heartBeat {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
      }

      .user-info-form {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border-radius: 25px;
        padding: 30px;
        margin-bottom: 20px;
        box-shadow: 0 20px 40px rgba(255, 105, 180, 0.2);
        border: 2px solid rgba(255, 182, 193, 0.3);
        max-width: 400px;
        width: 100%;
      }

      .form-group {
        margin-bottom: 20px;
        text-align: left;
      }

      .form-label {
        display: block;
        font-size: 1rem;
        font-weight: 600;
        color: #2d3436;
        margin-bottom: 8px;
      }

      .form-input {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid rgba(255, 182, 193, 0.4);
        border-radius: 15px;
        font-size: 1rem;
        font-family: "Quicksand", sans-serif;
        background: rgba(255, 240, 245, 0.8);
        transition: all 0.3s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: #ff69b4;
        background: rgba(255, 255, 255, 0.9);
        box-shadow: 0 0 10px rgba(255, 105, 180, 0.3);
      }

      .btn {
        background: linear-gradient(45deg, #ff4081, #ff6ec7);
        color: white;
        border: none;
        padding: 15px 40px;
        font-size: 1.2rem;
        font-weight: 600;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 8px 25px rgba(255, 64, 129, 0.4);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: "Quicksand", sans-serif;
        text-transform: uppercase;
        letter-spacing: 1px;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.5s;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 12px 35px rgba(255, 64, 129, 0.6);
      }

      .btn:active {
        transform: translateY(-1px) scale(1.02);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .game-screen {
        display: none;
        text-align: center;
        max-width: 600px;
        width: 100%;
        animation: slideIn 0.6s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .question-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border-radius: 25px;
        padding: 40px;
        margin-bottom: 30px;
        box-shadow: 0 20px 40px rgba(255, 105, 180, 0.2);
        border: 2px solid rgba(255, 182, 193, 0.3);
      }

      .question-number {
        background: linear-gradient(45deg, #ff4081, #ff6ec7);
        color: white;
        padding: 8px 20px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 600;
        display: inline-block;
        margin-bottom: 20px;
      }

      .question-text {
        font-size: 1.5rem;
        color: #2d3436;
        margin-bottom: 30px;
        font-weight: 600;
        line-height: 1.4;
      }

      .options-container {
        display: grid;
        gap: 15px;
        margin-bottom: 20px;
      }

      .option-btn {
        background: rgba(255, 240, 245, 0.8);
        color: #2d3436;
        border: 2px solid rgba(255, 182, 193, 0.4);
        padding: 18px 25px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 500;
        transition: all 0.3s ease;
        font-family: "Quicksand", sans-serif;
        position: relative;
        overflow: hidden;
      }

      .option-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 105, 180, 0.1),
          transparent
        );
        transition: left 0.5s;
      }

      .option-btn:hover::before {
        left: 100%;
      }

      .option-btn:hover {
        background: rgba(255, 105, 180, 0.1);
        border-color: #ff69b4;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(255, 105, 180, 0.3);
      }

      .response-message {
        display: none;
        background: linear-gradient(45deg, #ff9a9e, #fecfef);
        color: #2d3436;
        padding: 20px;
        border-radius: 20px;
        margin: 20px 0;
        font-size: 1.2rem;
        font-weight: 600;
        animation: messageSlideIn 0.5s ease-out;
        box-shadow: 0 10px 25px rgba(255, 154, 158, 0.3);
      }

      @keyframes messageSlideIn {
        from {
          opacity: 0;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .final-screen {
        display: none;
        text-align: center;
        animation: finalFadeIn 1s ease-out;
      }

      @keyframes finalFadeIn {
        from {
          opacity: 0;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .heart-unlock {
        font-size: 8rem;
        color: #ff1744;
        margin: 30px 0;
        animation: heartUnlock 2s ease-in-out;
      }

      @keyframes heartUnlock {
        0% {
          transform: scale(0) rotate(-180deg);
          opacity: 0;
        }
        50% {
          transform: scale(1.2) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: scale(1) rotate(0deg);
          opacity: 1;
        }
      }

      .final-message {
        background: linear-gradient(45deg, #ffd700, #ffed4e);
        padding: 30px;
        border-radius: 25px;
        margin: 30px 0;
        box-shadow: 0 15px 35px rgba(255, 215, 0, 0.3);
        border: 3px solid rgba(255, 215, 0, 0.5);
      }

      .final-title {
        font-size: 2.2rem;
        color: #2d3436;
        margin-bottom: 15px;
        font-weight: 700;
      }

      .final-text {
        font-size: 1.3rem;
        color: #2d3436;
        font-weight: 600;
        line-height: 1.5;
      }

      .result-summary {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 20px;
        margin: 20px 0;
        text-align: left;
        font-size: 1rem;
        color: #2d3436;
      }

      .celebration-hearts {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
      }

      .celebration-heart {
        position: absolute;
        font-size: 30px;
        color: #ff1744;
        animation: celebrate 3s ease-out forwards;
      }

      @keyframes celebrate {
        0% {
          transform: scale(0) rotate(0deg);
          opacity: 1;
        }
        50% {
          transform: scale(1.5) rotate(180deg);
          opacity: 1;
        }
        100% {
          transform: scale(1) rotate(360deg) translateY(-200px);
          opacity: 0;
        }
      }

      .progress-container {
        width: 100%;
        height: 6px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        margin-bottom: 30px;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(45deg, #ff4081, #ff6ec7);
        border-radius: 10px;
        transition: width 0.5s ease;
        width: 0%;
      }

      .loading-indicator {
        display: none;
        text-align: center;
        padding: 20px;
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(255, 105, 180, 0.3);
        border-top: 4px solid #ff69b4;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        color: #d81b60;
        font-weight: 600;
        font-size: 1.1rem;
      }

      .status-message {
        padding: 15px;
        border-radius: 15px;
        margin: 15px 0;
        font-weight: 600;
        text-align: center;
      }

      .status-success {
        background: linear-gradient(45deg, #4caf50, #81c784);
        color: white;
      }

      .status-error {
        background: linear-gradient(45deg, #f44336, #ef5350);
        color: white;
      }

      @media (max-width: 768px) {
        .main-title {
          font-size: 2.5rem;
        }

        .subtitle {
          font-size: 1.1rem;
        }

        .btn {
          padding: 12px 30px;
          font-size: 1rem;
        }

        .question-card,
        .user-info-form {
          padding: 25px;
        }

        .question-text {
          font-size: 1.3rem;
        }

        .option-btn {
          padding: 15px 20px;
          font-size: 1rem;
        }

        .heart-unlock {
          font-size: 6rem;
        }

        .final-title {
          font-size: 1.8rem;
        }
      }

      @media (max-width: 480px) {
        .main-title {
          font-size: 2rem;
        }

        .game-container {
          padding: 15px;
        }

        .question-card,
        .user-info-form {
          padding: 20px;
        }

        .heart-unlock {
          font-size: 5rem;
        }
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="heart-container" id="heartContainer"></div>

    <div class="game-container">
      <div class="welcome-screen" id="welcomeScreen">
        <h1 class="main-title">Thuyá»n Cáº­p Báº¿n â€“ LÃ²ng Dá»‹u ÃŠm</h1>
        <div class="heart-decoration">ğŸŒ¸ğŸ’–ğŸ˜‹</div>
        <p class="subtitle">
          KhÃ¡m phÃ¡ báº£n thÃ¢n mÃ¬nh qua 5 cÃ¢u há»i thÃº vá»‹ nÃ¨! ğŸŒŸ
        </p>

        <div class="user-info-form">
          <div class="form-group">
            <label class="form-label" for="playerName"
              >TÃªn cá»§a báº¡n ğŸŒ¸</label
            >
            <input
              type="text"
              id="playerName"
              class="form-input"
              placeholder="Nháº­p tÃªn báº¡n nha..."
              value=""
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="playerEmail">Email cá»§a báº¡n ğŸ“¬</label>
            <input
              type="email"
              id="playerEmail"
              class="form-input"
              placeholder="email@example.com"
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="playerAge">Tuá»•i cá»§a báº¡n ğŸŒŸ</label>
            <input
              type="number"
              id="playerAge"
              class="form-input"
              placeholder="Nháº­p tuá»•i nha..."
              min="18"
              max="100"
              value="19"
            />
          </div>
        </div>

        <button class="btn" onclick="startGame()" id="startBtn">
          ğŸŒ¸ Báº¯t Äáº§u KhÃ¡m PhÃ¡
        </button>

        <div id="statusMessage"></div>
      </div>

      <div class="game-screen" id="gameScreen">
        <div class="progress-container">
          <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="question-card">
          <div class="question-number" id="questionNumber"></div>
          <h2 class="question-text" id="questionText"></h2>
          <div class="options-container" id="optionsContainer"></div>
          <div class="response-message" id="responseMessage"></div>
        </div>
      </div>

      <div class="final-screen" id="finalScreen">
        <div class="loading-indicator" id="finalLoadingIndicator">
          <div class="loading-spinner"></div>
          <div class="loading-text">Äang phÃ¢n lá»c thÃ´ng tin cá»§a báº¡n... ğŸ’•</div>
        </div>

        <div id="finalContent" style="display: none">
          <div class="heart-unlock">âœ¨</div>
          <div class="final-message">
            <h2 class="final-title">Káº¿t Quáº£ Cá»§a Báº¡n! ğŸ‰</h2>
            <p class="final-text" id="finalResultText">
              Wow, báº¡n thá»±c sá»± Ä‘áº·c biá»‡t! HÃ£y xem báº¡n thuá»™c nhÃ³m tÃ­nh cÃ¡ch nÃ o nha! ğŸ’•
            </p>
          </div>

          <div class="result-summary" id="resultSummary"></div>

          <button class="btn" onclick="restartGame()">
            ğŸ”„ LÃ m Láº¡i NÃ o
          </button>
        </div>
      </div>
    </div>

    <script>
      const GOOGLE_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbxhZluU9t4p8MqsAeUc3q20CtQ0XaUq4R5Pxvg7h0Xi3ZUbhVeyjL8Tp2plh_7ti5NzqQ/exec";

      const questions = [
  {
    question: "Báº¡n thÃ­ch dÃ nh thá»i gian trong khung giá» nÃ o nháº¥t? ğŸŒ¸",
    options: [
      "â˜€ï¸ SÃ¡ng sá»›m - thÃ­ch sá»± yÃªn tÄ©nh vÃ  nÄƒng lÆ°á»£ng má»›i máº»",
      "â˜• SÃ¡ng muá»™n - thÆ° giÃ£n vá»›i ly cÃ  phÃª vÃ  khÃ´ng gian áº¥m cÃºng",
      "ğŸŒ™ Tá»‘i muá»™n - táº­n hÆ°á»Ÿng sá»± tÄ©nh láº·ng vÃ  nhá»¯ng suy nghÄ© sÃ¢u sáº¯c",
      "ğŸ˜‹ Báº¥t cá»© lÃºc nÃ o - miá»…n lÃ  vui váº» vÃ  cÃ³ ngÆ°á»i trÃ² chuyá»‡n",
    ],
    responses: [
      "Wow, báº¡n lÃ  ngÆ°á»i yÃªu thÃ­ch sá»± khá»Ÿi Ä‘áº§u tÆ°Æ¡i má»›i! â˜€ï¸",
      "CÃ  phÃª vÃ  khÃ´ng gian áº¥m cÃºng, báº¡n biáº¿t táº­n hÆ°á»Ÿng cuá»™c sá»‘ng Ä‘Ã³! â˜•",
      "TÃ¢m há»“n sÃ¢u sáº¯c, báº¡n thÃ­ch nhá»¯ng khoáº£nh kháº¯c tÄ©nh láº·ng! ğŸŒ™",
      "NÄƒng lÆ°á»£ng tÃ­ch cá»±c, báº¡n lÃ m má»i thá»© trá»Ÿ nÃªn vui váº»! ğŸ˜‹",
    ],
  },
  {
    question: "Äiá»u gÃ¬ khiáº¿n báº¡n cáº£m tháº¥y háº¡nh phÃºc nháº¥t? ğŸ’–",
    options: [
      "ğŸ Nháº­n Ä‘Æ°á»£c nhá»¯ng mÃ³n quÃ  nhá» báº¥t ngá» tá»« ngÆ°á»i quan tÃ¢m",
      "ğŸ“ ÄÆ°á»£c ai Ä‘Ã³ láº¯ng nghe vÃ  tháº¥u hiá»ƒu nhá»¯ng tÃ¢m tÆ° cá»§a mÃ¬nh",
      "ğŸŒŸ Cáº£m tháº¥y Ä‘Æ°á»£c yÃªu thÆ°Æ¡ng qua nhá»¯ng hÃ nh Ä‘á»™ng quan tÃ¢m nhá»",
      "ğŸ˜† CÆ°á»i Ä‘au bá»¥ng vá»›i nhá»¯ng cÃ¢u chuyá»‡n hÃ i hÆ°á»›c",
    ],
    responses: [
      "MÃ³n quÃ  nhá» nhÆ°ng tÃ¬nh cáº£m to lá»›n, báº¡n tháº­t Ä‘Ã¡ng yÃªu! ğŸ€",
      "ÄÆ°á»£c tháº¥u hiá»ƒu lÃ  Ä‘iá»u quÃ½ giÃ¡ nháº¥t Ä‘Ãºng khÃ´ng? ğŸ’Œ",
      "Nhá»¯ng hÃ nh Ä‘á»™ng nhá» chá»©a Ä‘á»±ng tÃ¬nh yÃªu lá»›n! ğŸŒ·",
      "Tiáº¿ng cÆ°á»i lÃ  liá»u thuá»‘c tá»‘t nháº¥t! ğŸ˜„",
    ],
  },
  {
    question: "Khi gáº·p khÃ³ khÄƒn, báº¡n thÆ°á»ng lÃ m gÃ¬? ğŸ¤”",
    options: [
      "ğŸ§­ Tá»± mÃ¬nh tÃ¬m cÃ¡ch giáº£i quyáº¿t vÃ  há»c há»i tá»« tráº£i nghiá»‡m",
      "ğŸ“² TÃ¬m ngÆ°á»i tin tÆ°á»Ÿng Ä‘á»ƒ chia sáº» vÃ  xin lá»i khuyÃªn",
      "ğŸ˜œ Cá»‘ gáº¯ng giá»¯ tinh tháº§n tÃ­ch cá»±c vÃ  tÃ¬m Ä‘iá»u vui trong hoÃ n cáº£nh khÃ³ khÄƒn",
      "ğŸš£â€â™‚ï¸ Im láº·ng suy nghÄ© cho Ä‘áº¿n khi tÃ¬m ra hÆ°á»›ng giáº£i quyáº¿t",
    ],
    responses: [
      "Báº¡n lÃ  ngÆ°á»i Ä‘á»™c láº­p vÃ  máº¡nh máº½! ğŸ’“",
      "Biáº¿t tÃ¬m kiáº¿m sá»± há»— trá»£ lÃ  Ä‘iá»u thÃ´ng minh! ğŸ“©",
      "Láº¡c quan trong khÃ³ khÄƒn, báº¡n tháº­t tuyá»‡t vá»i! ğŸ˜Š",
      "Suy nghÄ© ká»¹ lÆ°á»¡ng trÆ°á»›c khi hÃ nh Ä‘á»™ng, ráº¥t khÃ´n ngoan! â˜ï¸",
    ],
  },
  {
    question: "MÃ³n quÃ  nÃ o báº¡n thÃ­ch nháº­n nháº¥t? ğŸ",
    options: [
      "ğŸŒ¹ Hoa tÆ°Æ¡i kÃ¨m lá»i nháº¯n ngá»t ngÃ o",
      "ğŸª Äá»“ Äƒn ngon Ä‘Æ°á»£c lÃ m táº­n tay",
      "ğŸ“– SÃ¡ch hoáº·c nháº­t kÃ½ vá»›i nhá»¯ng dÃ²ng ghi chÃº cÃ¡ nhÃ¢n",
      "ğŸ§¸ Äá»“ váº­t dá»… thÆ°Æ¡ng Ä‘á»ƒ lÃ m ká»· niá»‡m",
    ],
    responses: [
      "Hoa vÃ  lá»i ngá»t ngÃ o, báº¡n thÃ­ch sá»± lÃ£ng máº¡n! ğŸŒ·",
      "Äá»“ Äƒn lÃ m báº±ng tÃ¬nh yÃªu thÆ°Æ¡ng, tháº­t Ã½ nghÄ©a! ğŸ°",
      "Nhá»¯ng dÃ²ng chá»¯ chá»©a Ä‘á»±ng tÃ¢m tÆ°, ráº¥t cáº£m Ä‘á»™ng! ğŸ“–",
      "Ká»· váº­t Ä‘Ã¡ng yÃªu Ä‘á»ƒ lÆ°u giá»¯ ká»· niá»‡m! ğŸ§¸",
    ],
  },
  {
    question: "Buá»•i háº¹n lÃ½ tÆ°á»Ÿng cá»§a báº¡n lÃ  gÃ¬? ğŸ’•",
    options: [
      "ğŸŒ… Ngáº¯m bÃ¬nh minh/hoÃ ng hÃ´n á»Ÿ nÆ¡i yÃªn tÄ©nh",
      "â˜• Uá»‘ng cÃ  phÃª vÃ  trÃ² chuyá»‡n sÃ¢u sáº¯c",
      "ğŸ§ Nghe nháº¡c vÃ  chia sáº» sá»Ÿ thÃ­ch cÃ¹ng nhau",
      "ğŸŒŠ Äi dáº¡o vÃ  nÃ³i chuyá»‡n vá» má»i thá»© trÃªn Ä‘á»i",
    ],
    responses: [
      "ThiÃªn nhiÃªn vÃ  khoáº£nh kháº¯c yÃªn bÃ¬nh, tháº­t lÃ£ng máº¡n! â˜€ï¸",
      "CÃ  phÃª vÃ  cuá»™c trÃ² chuyá»‡n sÃ¢u sáº¯c, tuyá»‡t vá»i! â˜•",
      "Ã‚m nháº¡c káº¿t ná»‘i tÃ¢m há»“n, ráº¥t Ä‘áº¹p! ğŸ¶",
      "Nhá»¯ng cuá»™c trÃ² chuyá»‡n tá»± nhiÃªn vÃ  chÃ¢n tháº­t! ğŸŒŠ",
    ],
  },
];


      const personalityTypes = [
  {
    name: "ğŸŒ… CÃ´ GÃ¡i LÃ£ng Máº¡n",
    description:
      "Báº¡n lÃ  ngÆ°á»i yÃªu thÃ­ch sá»± lÃ£ng máº¡n vÃ  nhá»¯ng khoáº£nh kháº¯c Ä‘áº¹p trong cuá»™c sá»‘ng. Báº¡n cÃ³ tÃ¢m há»“n nháº¡y cáº£m, biáº¿t trÃ¢n trá»ng váº» Ä‘áº¹p nhá» bÃ© vÃ  luÃ´n tÃ¬m kiáº¿m nhá»¯ng tráº£i nghiá»‡m Ã½ nghÄ©a.",
    emoji: "ğŸ’–âœ¨",
  },
  {
    name: "ğŸ˜ CÃ´ GÃ¡i NÄƒng Äá»™ng",
    description:
      "Báº¡n mang trong mÃ¬nh nÄƒng lÆ°á»£ng tÃ­ch cá»±c vÃ  kháº£ nÄƒng lÃ m vui lÃ²ng má»i ngÆ°á»i xung quanh. Báº¡n láº¡c quan, hÃ i hÆ°á»›c vÃ  luÃ´n biáº¿t cÃ¡ch tÃ¬m ra Ä‘iá»u tÃ­ch cá»±c trong má»i hoÃ n cáº£nh.",
    emoji: "ğŸ‰ğŸ˜",
  },
  {
    name: "ğŸ¤— CÃ´ GÃ¡i áº¤m Ãp",
    description:
      "Báº¡n lÃ  ngÆ°á»i ráº¥t quan tÃ¢m Ä‘áº¿n cáº£m xÃºc vÃ  má»‘i quan há»‡ vá»›i má»i ngÆ°á»i. Báº¡n cÃ³ trÃ¡i tim nhÃ¢n háº­u, luÃ´n láº¯ng nghe vÃ  mang Ä‘áº¿n sá»± áº¥m Ã¡p cho nhá»¯ng ngÆ°á»i xung quanh.",
    emoji: "ğŸŒŸğŸ¥°",
  },
  {
    name: "ğŸ’Œ CÃ´ GÃ¡i DuyÃªn DÃ¡ng",
    description:
      "Báº¡n cÃ³ phong cÃ¡ch giao tiáº¿p duyÃªn dÃ¡ng vÃ  cuá»‘n hÃºt. Báº¡n biáº¿t cÃ¡ch táº¡o ra nhá»¯ng khoáº£nh kháº¯c Ä‘áº·c biá»‡t vÃ  Ä‘á»ƒ láº¡i áº¥n tÆ°á»£ng sÃ¢u sáº¯c trong lÃ²ng má»i ngÆ°á»i.",
    emoji: "ğŸ’•ğŸŒ¸",
  },
];


      let currentQuestion = 0;
      let gameStarted = false;
      let sessionId = "";
      let playerData = {
        name: "",
        email: "",
        age: "",
        answers: [],
        startTime: null,
        endTime: null,
        finalResult: null,
      };

      async function saveSessionToGoogleSheets(sessionData) {
        try {
          const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            mode: "no-cors",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(sessionData),
          });

          return true;
        } catch (error) {
          console.error("Error saving to Google Sheets:", error);
          return false;
        }
      }

      function showStatusMessage(message, type = "success") {
        const statusDiv = document.getElementById("statusMessage");
        statusDiv.innerHTML = `<div class="status-message status-${type}">${message}</div>`;

        setTimeout(() => {
          statusDiv.innerHTML = "";
        }, 3000);
      }

      function generateSessionId() {
        return Date.now().toString(36) + Math.random().toString(36).substr(2);
      }

      function validateUserInfo() {
        const name = document.getElementById("playerName").value.trim();
        const email = document.getElementById("playerEmail").value.trim();
        const age = document.getElementById("playerAge").value.trim();

        if (!name) {
          showStatusMessage("HÃ£y nháº­p tÃªn cá»§a báº¡n nha! ğŸ˜Š", "error");
          return false;
        }

        if (!email) {
          showStatusMessage("Email khÃ´ng thá»ƒ bá» trá»‘ng! ğŸ“¬", "error");
          return false;
        }

        if (!email.includes("@")) {
          showStatusMessage("Email khÃ´ng há»£p lá»‡, vui lÃ²ng kiá»ƒm tra láº¡i! ğŸ˜œ", "error");
          return false;
        }

        if (age && (age < 13 || age > 100)) {
          showStatusMessage("Tuá»•i pháº£i tá»« 13 Ä‘áº¿n 100! ğŸŒŸ", "error");
          return false;
        }

        playerData.name = name;
        playerData.email = email;
        playerData.age = age;
        playerData.startTime = new Date().toISOString();
        sessionId = generateSessionId();

        return true;
      }

      async function startGame() {
        if (!validateUserInfo()) {
          return;
        }

        document.getElementById("startBtn").disabled = true;

        gameStarted = true;
        currentQuestion = 0;
        playerData.answers = [];

        document.getElementById("welcomeScreen").classList.add("hidden");
        document.getElementById("gameScreen").style.display = "block";
        showQuestion();
        updateProgress();

        showStatusMessage(`Báº¯t Ä‘áº§u khÃ¡m phÃ¡ báº£n thÃ¢n nÃ o! ğŸŒ¸`, "success");
      }

      function showQuestion() {
        const question = questions[currentQuestion];
        document.getElementById("questionNumber").textContent = `CÃ¢u ${
          currentQuestion + 1
        }/${questions.length}`;
        document.getElementById("questionText").textContent = question.question;

        const optionsContainer = document.getElementById("optionsContainer");
        optionsContainer.innerHTML = "";

        question.options.forEach((option, index) => {
          const button = document.createElement("button");
          button.className = "option-btn";
          button.textContent = option;
          button.onclick = () => selectAnswer(index);
          optionsContainer.appendChild(button);
        });

        document.getElementById("responseMessage").style.display = "none";
      }

      async function selectAnswer(answerIndex) {
        const question = questions[currentQuestion];
        const response = question.responses[answerIndex];

        playerData.answers.push({
          questionIndex: currentQuestion + 1,
          question: question.question,
          selectedOption: question.options[answerIndex],
          optionIndex: answerIndex,
          response: response,
        });

        const responseElement = document.getElementById("responseMessage");
        responseElement.textContent = response;
        responseElement.style.display = "block";

        createHeartBurst();

        const optionButtons = document.querySelectorAll(".option-btn");
        optionButtons.forEach((btn) => {
          btn.disabled = true;
          btn.style.opacity = "0.6";
        });

        setTimeout(() => {
          if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            showQuestion();
            updateProgress();
          } else {
            finishGame();
          }
        }, 2500);
      }

      function updateProgress() {
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        document.getElementById("progressBar").style.width = progress + "%";
      }

      function calculateFinalResult() {
        const answerCounts = [0, 0, 0, 0];

        playerData.answers.forEach((answer) => {
          answerCounts[answer.optionIndex]++;
        });

        const maxCount = Math.max(...answerCounts);
        const dominantType = answerCounts.indexOf(maxCount);

        return personalityTypes[dominantType];
      }

      async function finishGame() {
        playerData.endTime = new Date().toISOString();
        playerData.finalResult = calculateFinalResult();

        document.getElementById("gameScreen").style.display = "none";
        document.getElementById("finalScreen").style.display = "block";
        document.getElementById("finalLoadingIndicator").style.display = "block";

        const sessionData = {
          sessionId: sessionId,
          timestamp: new Date().toISOString(),
          name: playerData.name,
          email: playerData.email,
          age: playerData.age,
          startTime: playerData.startTime,
          endTime: playerData.endTime,
          totalQuestions: questions.length,
          answer1: playerData.answers[0]?.selectedOption || "",
          answer2: playerData.answers[1]?.selectedOption || "",
          answer3: playerData.answers[2]?.selectedOption || "",
          answer4: playerData.answers[3]?.selectedOption || "",
          answer5: playerData.answers[4]?.selectedOption || "",
          answerIndex1: playerData.answers[0]?.optionIndex + 1 || "",
          answerIndex2: playerData.answers[1]?.optionIndex + 1 || "",
          answerIndex3: playerData.answers[2]?.optionIndex + 1 || "",
          answerIndex4: playerData.answers[3]?.optionIndex + 1 || "",
          answerIndex5: playerData.answers[4]?.optionIndex + 1 || "",
          personalityType: playerData.finalResult.name,
          personalityDescription: playerData.finalResult.description,
          personalityEmoji: playerData.finalResult.emoji,
          allAnswers: playerData.answers.map((a) => a.selectedOption).join(" | "),
          gameCompleted: true,
        };

        const saveSuccess = await saveSessionToGoogleSheets(sessionData);

        document.getElementById("finalLoadingIndicator").style.display = "none";
        document.getElementById("finalContent").style.display = "block";

        document.getElementById("finalResultText").innerHTML = 
          `ChÃºc má»«ng ${playerData.name}! Báº¡n Ä‘Ã£ hoÃ n thÃ nh bÃ i test ! ğŸ’•<br>
          HÃ£y xem káº¿t quáº£ thÃº vá»‹ vá» tÃ­nh cÃ¡ch cá»§a báº¡n nha! ğŸŒ¸<br>
          <br><strong>Káº¿t quáº£: ${playerData.finalResult.name}</strong>`;

        const summaryHtml = `
          <h3>ğŸŒŸ Káº¿t quáº£ khÃ¡m phÃ¡ báº£n thÃ¢n cá»§a ${playerData.name}:</h3>
          <p><strong>Loáº¡i tÃ­nh cÃ¡ch:</strong> ${playerData.finalResult.name}</p>
          <p><strong>MÃ´ táº£:</strong> ${playerData.finalResult.description}</p>
          <hr style="margin: 15px 0; border: 1px solid rgba(255,182,193,0.3);">
          <p><strong>CÃ¡c lá»±a chá»n cá»§a báº¡n:</strong></p>
          ${playerData.answers.map((answer, index) => 
            `<p><strong>CÃ¢u ${index + 1}:</strong> ${answer.selectedOption}</p>`
          ).join("")}
          <hr style="margin: 15px 0; border: 1px solid rgba(255,182,193,0.3);">
          <h3>ğŸ’• Lá»i nháº­n xÃ©t:</h3>
          <p>Báº¡n lÃ  má»™t ngÆ°á»i tháº­t Ä‘áº·c biá»‡t vá»›i nhá»¯ng Ä‘áº·c Ä‘iá»ƒm tÃ­nh cÃ¡ch ráº¥t Ä‘Ã¡ng yÃªu! Má»—i lá»±a chá»n cá»§a báº¡n Ä‘á»u thá»ƒ hiá»‡n má»™t khÃ­a cáº¡nh thÃº vá»‹ cá»§a báº£n thÃ¢n. HÃ£y tiáº¿p tá»¥c phÃ¡t huy nhá»¯ng Ä‘iá»ƒm máº¡nh vÃ  luÃ´n tá»± tin vÃ o con ngÆ°á»i mÃ¬nh nhÃ©! âœ¨</p>
          <p><strong>Cáº£m Æ¡n ${playerData.name} Ä‘Ã£ tham gia!</strong> Hy vá»ng báº¡n Ä‘Ã£ cÃ³ nhá»¯ng phÃºt giÃ¢y thÃº vá»‹ khi khÃ¡m phÃ¡ báº£n thÃ¢n mÃ¬nh! ğŸŒ¸</p>
        `;

        document.getElementById("resultSummary").innerHTML = summaryHtml;

        createCelebration();

        if (!saveSuccess) {
          showStatusMessage("CÃ³ lá»—i nhá» khi lÆ°u dá»¯ liá»‡u, nhÆ°ng káº¿t quáº£ váº«n hiá»ƒn thá»‹ bÃ¬nh thÆ°á»ng! ğŸ˜…", "error");
        }
      }

      function restartGame() {
        currentQuestion = 0;
        playerData.answers = [];
        sessionId = "";
        document.getElementById("finalScreen").style.display = "none";
        document.getElementById("welcomeScreen").classList.remove("hidden");
        document.getElementById("progressBar").style.width = "0%";
        document.getElementById("startBtn").disabled = false;

        document.getElementById("playerName").value = "ThÆ°";
        document.getElementById("playerEmail").value = "";
        document.getElementById("playerAge").value = "19";
      }

      function createFallingHeart() {
        const heart = document.createElement("div");
        heart.className = "falling-heart";
        heart.innerHTML = ["ğŸ’–", "ğŸ’•", "ğŸ’—", "ğŸ’", "ğŸ’˜"][Math.floor(Math.random() * 5)];
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = Math.random() * 3 + 2 + "s";
        heart.style.fontSize = Math.random() * 10 + 15 + "px";

        document.getElementById("heartContainer").appendChild(heart);

        setTimeout(() => {
          heart.remove();
        }, 5000);
      }

      function createHeartBurst() {
        for (let i = 0; i < 8; i++) {
          setTimeout(() => {
            const heart = document.createElement("div");
            heart.innerHTML = "ğŸ’–";
            heart.style.position = "fixed";
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.top = Math.random() * 100 + "vh";
            heart.style.fontSize = "25px";
            heart.style.pointerEvents = "none";
            heart.style.zIndex = "9999";
            heart.style.animation = "celebrate 2s ease-out forwards";
            document.body.appendChild(heart);

            setTimeout(() => heart.remove(), 2000);
          }, i * 100);
        }
      }

      function createCelebration() {
        const celebrationContainer = document.createElement("div");
        celebrationContainer.className = "celebration-hearts";
        document.body.appendChild(celebrationContainer);

        for (let i = 0; i < 20; i++) {
          setTimeout(() => {
            const heart = document.createElement("div");
            heart.className = "celebration-heart";
            heart.innerHTML = ["ğŸ’–", "ğŸ’•", "ğŸ’—", "ğŸ’", "ğŸ’˜", "â¤ï¸"][Math.floor(Math.random() * 6)];
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.top = Math.random() * 100 + "vh";
            celebrationContainer.appendChild(heart);
          }, i * 150);
        }

        setTimeout(() => {
          celebrationContainer.remove();
        }, 4000);
      }

      function createSparkle() {
        const sparkle = document.createElement("div");
        sparkle.innerHTML = "âœ¨";
        sparkle.style.position = "fixed";
        sparkle.style.left = Math.random() * 100 + "vw";
        sparkle.style.top = Math.random() * 100 + "vh";
        sparkle.style.fontSize = "20px";
        sparkle.style.pointerEvents = "none";
        sparkle.style.zIndex = "5";
        sparkle.style.animation = "sparkleFloat 4s ease-out forwards";
        document.body.appendChild(sparkle);

        setTimeout(() => sparkle.remove(), 4000);
      }

      setInterval(createFallingHeart, 800);

      const sparkleStyle = document.createElement("style");
      sparkleStyle.textContent = `
        @keyframes sparkleFloat {
          0% { opacity: 1; transform: translateY(0) rotate(0deg); }
          100% { opacity: 0; transform: translateY(-150px) rotate(360deg); }
        }
      `;
      document.head.appendChild(sparkleStyle);

      setInterval(createSparkle, 3000);
    </script>
  </body>
</html>